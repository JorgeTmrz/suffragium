(this.webpackJsonpsuffragium=this.webpackJsonpsuffragium||[]).push([[0],{352:function(e,t,n){},499:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(31),c=n.n(i),o=n(63),s=n(102),l=(n(352),n(155)),u=(n(241),n(242),{apiKey:"AIzaSyCV4FejTd50MsR-gmfg2lGq3UiVo_G7gig",authDomain:"suffragium-bb211.firebaseapp.com",projectId:"suffragium-bb211",storageBucket:"suffragium-bb211.appspot.com",messagingSenderId:"890623870215",appId:"1:890623870215:web:6a099717bc43b8724eb1a2",measurementId:"G-H0BN7L5Q72"}),d=n(4),j=Object(a.createContext)(l.a),b=function(e){var t=e.children;return l.a.apps.length||l.a.initializeApp(u),Object(d.jsx)(j.Provider,{value:l.a,children:t})},h=n(306),m=n(22),O={theme:"dark",user:{name:"",uid:""}},p=Object(h.a)({reducer:{app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_THEME":return Object(m.a)(Object(m.a)({},e),{},{theme:t.payload});case"SET_USER":return Object(m.a)(Object(m.a)({},e),{},{user:t.payload});default:return e}}}}),x=n(41),f=function(e){var t=e.Component,n=e.isAuthenticated,a=e.rest;return Object(d.jsx)(x.b,Object(m.a)(Object(m.a)({},a),{},{component:function(e){return n?Object(d.jsx)(x.a,{to:"/"}):Object(d.jsx)(t,{})}}))},g=function(e){var t=e.Component,n=e.isAuthenticated,a=e.rest;return Object(d.jsx)(x.b,Object(m.a)(Object(m.a)({},a),{},{component:function(e){return n?Object(d.jsx)(t,Object(m.a)({},e)):Object(d.jsx)(x.a,{to:"/auth"})}}))},v=n(567),C=n(116),w=n(541),y=n(18),S=n(9),k=n(586),N=n(548),q=n(158),E=n(547),I=n(80),D=n(549),R=n(243),T=Object(R.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:'url("assets/loginBg.jpg")',backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),Q=n(224),U=n(504),P=n(317),B=n(122),W=n(581),A=n(544),M=function(){return Object(d.jsxs)(I.a,{variant:"body2",color:"textSecondary",align:"center",gutterBottom:!0,children:["Copyright \xa9 ",Object(d.jsx)(A.a,{color:"inherit",children:"Suffragium"})," ",(new Date).getFullYear(),"."]})},F=function(e){var t=e.currentUser,n=e.onSubmitCallback,a=e.onChangeCallback,r=T();return Object(d.jsxs)("div",{className:r.form,children:[Object(d.jsx)(Q.a,{value:t.email,onChange:a,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Usuario",name:"email",autoComplete:"email",autoFocus:!0}),Object(d.jsx)(Q.a,{value:t.password,onChange:a,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Contrase\xf1a",type:"password",id:"password",autoComplete:"current-password"}),Object(d.jsx)(U.a,{control:Object(d.jsx)(P.a,{value:"remember",color:"primary"}),label:"Recuerdame"}),Object(d.jsx)(B.a,{type:"button",fullWidth:!0,href:"",variant:"contained",color:"primary",onClick:n,className:r.submit,children:"Iniciar Sesi\xf3n"}),Object(d.jsx)(W.a,{mt:5,children:Object(d.jsx)(M,{})})]})},z=n(583),G=n(68),H=n.n(G),J=n(7),L=n(133),_=["password","confirmPassword"],V=["password","confirmPassword"],Y=function(){var e=Object(a.useContext)(j),t=e.firestore().collection("Users"),n=Object(o.c)(),r=Object(a.useCallback)(function(){var n=Object(L.a)(H.a.mark((function n(a){var r,i,c,o,s;return H.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=a.password,a.confirmPassword,o=Object(J.a)(a,_),n.next=3,e.auth().createUserWithEmailAndPassword(a.email,c);case 3:s=n.sent,t.doc(null===(r=s.user)||void 0===r?void 0:r.uid).set(Object(m.a)(Object(m.a)({},o),{},{id:null===(i=s.user)||void 0===i?void 0:i.uid}));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[e,t]),i=Object(a.useCallback)(Object(L.a)(H.a.mark((function e(){var n;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get();case 2:return n=e.sent,e.abrupt("return",n.docs.map((function(e){return e.data()})).filter((function(e){return!e.isAdmin})));case 4:case"end":return e.stop()}}),e)}))),[t]),c=Object(a.useCallback)((function(e){return t.doc(e).get().then((function(t){return Object(m.a)(Object(m.a)({},t.data()),{},{uid:e})}))}),[t]),s=Object(a.useCallback)(function(){var e=Object(L.a)(H.a.mark((function e(n,a){var r;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.password,a.confirmPassword,r=Object(J.a)(a,V),e.next=3,t.doc(n).set(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[t]);return{checkIfToken:Object(a.useCallback)((function(){var e,t=JSON.parse(null!==(e=localStorage.getItem("user"))&&void 0!==e?e:"{}");t&&n({type:"SET_USER",payload:{uid:null===t||void 0===t?void 0:t.uid,email:null===t||void 0===t?void 0:t.email}})}),[n]),loginAdminUser:function(t,a){e.auth().signInWithEmailAndPassword(t.email,t.password).then((function(t){var r,i;c(null!==(r=null===(i=t.user)||void 0===i?void 0:i.uid)&&void 0!==r?r:"").then((function(t){(null===t||void 0===t?void 0:t.isAdmin)?(localStorage.setItem("user",JSON.stringify(t)),n({type:"SET_USER",payload:t})):(e.auth().signOut(),a("Este usuario existe, pero no es administrador"))}))})).catch((function(e){a("Ocurrio un error, revise los datos ingresados")}))},createUser:r,getUsers:i,getUser:c,editUser:s}},K=function(){var e=Y().loginAdminUser,t=T(),n=Object(a.useState)(""),r=Object(S.a)(n,2),i=r[0],c=r[1],o=Object(a.useState)({email:"",password:""}),s=Object(S.a)(o,2),l=s[0],u=s[1];return Object(d.jsxs)(E.a,{container:!0,component:"main",className:t.root,children:[Object(d.jsx)(N.a,{}),Object(d.jsx)(E.a,{item:!0,xs:!1,sm:4,md:7,className:t.image}),Object(d.jsx)(E.a,{item:!0,xs:12,sm:8,md:5,component:q.a,elevation:6,square:!0,children:Object(d.jsxs)("div",{className:t.paper,children:[Object(d.jsx)(k.a,{className:t.avatar,children:Object(d.jsx)(D.a,{})}),Object(d.jsx)(I.a,{component:"h1",variant:"h5",children:"Iniciar Sesi\xf3n"}),i&&Object(d.jsx)(z.a,{variant:"outlined",severity:"error",style:{width:"100%",marginTop:"10px"},children:i}),Object(d.jsx)(F,{onSubmitCallback:function(t){l.email&&l.password?e(l,c):c("Asegurese de llenar todos los campos")},onChangeCallback:function(e){var t=e.target,n=t.name,a=t.value;u((function(e){return Object(m.a)(Object(m.a)({},e),{},Object(y.a)({},n,a))}))},currentUser:l})]})})]})},X=n(5),Z=n(587),$=n(580),ee=n(568),te=n(503),ne=n(557),ae=n(138),re=n(579),ie=n(303),ce=n.n(ie),oe=n(304),se=n.n(oe),le=n(505),ue=n(506),de=n(551),je=n(282),be=n.n(je),he=n(550),me=n(552),Oe=function(){var e=Object(x.g)();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(le.a,{button:!0,onClick:function(){e.push("/")},children:[Object(d.jsx)(ue.a,{children:Object(d.jsx)(he.a,{})}),Object(d.jsx)(de.a,{primary:"Salas"})]}),Object(d.jsxs)(le.a,{button:!0,onClick:function(){e.push("/usuarios")},children:[Object(d.jsx)(ue.a,{children:Object(d.jsx)(be.a,{})}),Object(d.jsx)(de.a,{primary:"Usuarios"})]}),Object(d.jsxs)(le.a,{button:!0,onClick:function(){e.push("/ajustes")},children:[Object(d.jsx)(ue.a,{children:Object(d.jsx)(me.a,{})}),Object(d.jsx)(de.a,{primary:"Ajustes"})]})]})},pe=Object(R.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(m.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(y.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}})),xe=n(553),fe=function(e){var t=e.onClick,n=e.buttonText,a=e.icon,r=void 0===a?xe.a:a,i=e.color,c=void 0===i?"primary":i,o=Object(R.a)((function(e){return{divider:{marginBottom:"20px"}}}))();return Object(d.jsx)(E.a,{className:o.divider,container:!0,direction:"row",justifyContent:"flex-end",alignItems:"flex-end",children:Object(d.jsxs)(B.a,{onClick:t,variant:"contained",color:c,children:[Object(d.jsx)(r,{}),"".concat(n)]})})},ge=n(559),ve=n(584),Ce=n(307),we=n(156),ye=[{name:"Si",value:0},{name:"No",value:0},{name:"Me abstengo",value:0}],Se=function(e){var t=e.answers.reduce((function(e,t){return"Si"===t.aswer&&e[0].value++,"No"===t.aswer&&e[1].value++,"Me abstengo"===t.aswer&&e[2].value++,e}),ye);return Object(d.jsx)(E.a,{children:Object(d.jsxs)(ve.a,{width:400,height:400,children:[Object(d.jsx)(Ce.a,{dataKey:"value",isAnimationActive:!1,data:t,cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",label:!0}),Object(d.jsx)(we.a,{})]})})},ke=n(558),Ne=function(e){var t=e.isEnded,n=e.onClickCallback,a=e.title;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(ne.a,{}),Object(d.jsxs)(le.a,{children:[Object(d.jsx)(de.a,{primary:a}),Object(d.jsx)(ke.a,{children:Object(d.jsx)(B.a,{disabled:t,onClick:function(){n(a)},variant:"contained",color:"secondary",children:"Terminar"})})]}),Object(d.jsx)(ne.a,{})]})},qe=["questions"],Ee=function(){var e=Object(a.useContext)(j),t=e.firestore().collection("Rooms"),n=e.firestore().collection("Questions"),r=Object(a.useCallback)((function(e,a){var r,i=e.questions,c=Object(J.a)(e,qe);t.add(Object(m.a)(Object(m.a)({},c),{},{beginDate:new Date,endDate:new Date(null!==(r=c.endDate)&&void 0!==r?r:0),isEnded:!1,participants:a})).then((function(e){n.add({questions:i.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{isEnded:!1})})),room:e.id})}))}),[n,t]),i=Object(a.useCallback)((function(){return t.get().then((function(e){return{ended:e.docs.map((function(e){return Object(m.a)({id:e.id},e.data())})).filter((function(e){return e.isEnded})),active:e.docs.map((function(e){return Object(m.a)({id:e.id},e.data())})).filter((function(e){return!e.isEnded}))}}))}),[t]),c=Object(a.useCallback)((function(e){return t.doc(e).get().then((function(e){return e.data()}))}),[t]),o=Object(a.useCallback)((function(e){return n.where("room","==",e).get().then((function(e){return e.docs.map((function(e){return e.data()}))}))}),[n]);return{endQuestion:Object(a.useCallback)((function(e,t){n.where("room","==",e).get().then((function(e){e.docs.forEach((function(e){n.doc(e.id).update({questions:t})}))}))}),[n]),createRoom:r,getRoom:c,getRooms:i,getQuestions:o,getQuestionsId:Object(a.useCallback)((function(e){return n.where("room","==",e).get().then((function(e){return e.docs.map((function(e){return e.id}))[0]}))}),[n])}},Ie=function(){var e=function(e){var t,n=Object(a.useContext)(j),r=Object(x.g)(),i=Object(a.useState)([]),c=Object(S.a)(i,2),o=c[0],s=c[1],l=Object(a.useState)(""),u=Object(S.a)(l,2),d=u[0],b=u[1],h=Ee(),m=h.getRoom,O=h.getQuestions,p=h.endQuestion,f=h.getQuestionsId,g=Object(a.useState)([]),v=Object(S.a)(g,2),C=v[0],w=v[1],y=Object(a.useState)(),k=Object(S.a)(y,2),N=k[0],q=k[1],E=null===(t=C.find((function(e){return!e.isEnded})))||void 0===t?void 0:t.question,I=Object(a.useCallback)((function(t){var n=C.map((function(e){return e.question===t&&(e.isEnded=!0),e}));p(e,n),w(n)}),[p,e,C]);Object(a.useEffect)((function(){(null===N||void 0===N?void 0:N.title)||m(e).then((function(e){q(e)}))}),[m,e,null===N||void 0===N?void 0:N.title]);var D=n.firestore().collection("Answers").where("questions","==",d).onSnapshot((function(e){e.docChanges().forEach((function(t){var n;s(null!==(n=e.docs.map((function(e){return e.data()}))[0].users.filter((function(e){return e.question===E})))&&void 0!==n?n:[])}))}));return Object(a.useEffect)((function(){C.length||O(e).then((function(e){var t=Object(S.a)(e,1)[0].questions;w(t)}))}),[O,e,C.length]),Object(a.useEffect)((function(){d||f(e).then(b)}),[f,d,e]),Object(a.useEffect)((function(){return function(){return D()}})),{currentQuestion:E,room:N,questions:C,handleQuestionEnd:I,questionsid:d,endRoom:function(){n.firestore().collection("Rooms").doc(e).set({isEnded:!0},{merge:!0}).then((function(){r.push("/")}))},answers:o}}(Object(x.h)().id),t=e.currentQuestion,n=e.handleQuestionEnd,r=e.questions,i=e.room,c=e.answers,o=e.endRoom;return Object(d.jsxs)(E.a,{container:!0,alignContent:"center",spacing:4,children:[Object(d.jsx)(fe,{buttonText:"Terminar sesi\xf3n",onClick:o,color:"secondary",icon:ge.a}),Object(d.jsxs)(E.a,{children:[Object(d.jsx)(I.a,{variant:"h5",children:null===i||void 0===i?void 0:i.title.toUpperCase()}),Object(d.jsx)(I.a,{variant:"caption",children:t})]}),Object(d.jsxs)(E.a,{container:!0,justifyContent:"center",direction:"column",alignItems:"center",alignContent:"space-between",children:[Object(d.jsx)(Se,{answers:c}),Object(d.jsx)(te.a,{style:{width:"100%"},children:r.map((function(e){return Object(d.jsx)(Ne,{isEnded:e.isEnded,title:e.question,onClickCallback:n})}))})]})]})},De=n(560),Re=n(561),Te=n(563),Qe=n(562),Ue=function(e){var t=e.date,n=e.roomId,a=e.title,r=Object(x.g)(),i=Object(R.a)({card:{width:"30%",minWidth:"250px"},buttonGrid:{display:"flex",marginTop:"10px",marginBottom:"10px"}})();return Object(d.jsx)(E.a,{item:!0,alignItems:"center",justifyContent:"center",children:Object(d.jsxs)(De.a,{className:i.card,variant:"elevation",children:[Object(d.jsx)(Re.a,{avatar:Object(d.jsx)(k.a,{children:Object(d.jsx)(Qe.a,{color:"secondary"})}),title:Object(d.jsx)(I.a,{variant:"h6",children:a}),subheader:new Date(t).toLocaleDateString()}),Object(d.jsx)(Te.a,{children:Object(d.jsx)(E.a,{className:i.buttonGrid,alignContent:"center",children:Object(d.jsx)(B.a,{onClick:function(){!function(e){r.push("sala/".concat(e))}(n)},fullWidth:!0,variant:"contained",color:"primary",children:"Entrar a la reuni\xf3n"})})})]})})},Pe=n(308),Be=n(89),We=n(564),Ae=n(565),Me=function(e){var t=e.topic,n=void 0===t?"test":t,r=e.participants,i=void 0===r?Object:r,c=e.date,o=void 0===c?+new Date:c,s=Object(a.useState)(!1),l=Object(S.a)(s,2),u=l[0],j=l[1],b=Object(a.useRef)(null),h=Object.keys(null!==i&&void 0!==i?i:{}).length,m=function(){j(!u)},O=Object(R.a)((function(e){return{avatarIcon:{width:"30px",height:"30px",color:e.palette.grey[100],backgroundColor:e.palette.success.main}}}))();return Object(d.jsx)(E.a,{xs:12,sm:3,item:!0,children:Object(d.jsxs)(De.a,{variant:"elevation",children:[Object(d.jsx)(Pe.a,{open:u,anchorEl:b.current,onClose:m,children:Object(d.jsx)(Be.a,{children:"Detalles"})}),Object(d.jsx)(Re.a,{action:Object(d.jsx)(ae.a,{ref:b,onClick:m,children:Object(d.jsx)(We.a,{})}),avatar:Object(d.jsx)(k.a,{className:O.avatarIcon,children:Object(d.jsx)(Ae.a,{})}),title:new Date(o).toDateString(),subheader:"".concat(h," participantes")}),Object(d.jsx)(Te.a,{children:Object(d.jsx)(W.a,{children:Object(d.jsx)(I.a,{variant:"h4",children:n})})})]})})},Fe=Object(R.a)({divider:{marginBottom:"20px",marginTop:"20px"},endedRoomsTitle:{marginBottom:"20px"}}),ze=n(569),Ge=n(570),He=n(571),Je=n(572),Le=n(225),_e=n(186),Ve=Object(R.a)((function(e){return{buttonContainer:{display:"flex"},button:{borderRadius:"50px"},textSubtitle:{marginTop:"15px"},questionListItem:{display:"flex",flexDirection:"row",justifyContent:"space-between"}}})),Ye=function(e){var t=e.handleCurrentRoomChange,n=void 0===t?function(){}:t,a=e.handleCurrentQuestionChange,r=void 0===a?function(){}:a,i=e.pushQuestion,c=e.currentRoom,o=e.currentQuestion,s=Ve();return Object(d.jsxs)(E.a,{container:!0,spacing:3,children:[Object(d.jsx)(E.a,{item:!0,sm:8,children:Object(d.jsx)(Q.a,{onChange:n,value:c.title,required:!0,id:"title",name:"title",label:"Titulo de la agenda",fullWidth:!0})}),Object(d.jsx)(E.a,{item:!0,sm:4,children:Object(d.jsx)(Q.a,{onChange:n,value:c.endDate,type:"datetime-local",required:!0,id:"endDate",name:"endDate",label:"Hora de finalizaci\xf3n",fullWidth:!0})}),Object(d.jsx)(E.a,{item:!0,sm:7,children:Object(d.jsx)(Q.a,{onChange:r,value:o.question,required:!0,id:"question",name:"question",label:"Pregunta",fullWidth:!0})}),Object(d.jsxs)(E.a,{item:!0,sm:3,children:[Object(d.jsx)(Le.a,{children:"Duracion"}),Object(d.jsx)(_e.a,{onChange:r,value:o.duration,required:!0,id:"duration",name:"duration",label:"Duration",fullWidth:!0,children:["2","5","10"].map((function(e){return Object(d.jsx)(Be.a,{value:e,children:e})}))})]}),Object(d.jsx)(E.a,{className:s.buttonContainer,item:!0,sm:2,children:Object(d.jsx)(B.a,{onClick:i,className:s.button,title:"A\xf1adir Pregunta",variant:"contained",color:"primary",children:Object(d.jsx)(xe.a,{})})})]})},Ke=n(566),Xe=function(e){var t=e.currentRoom,n=e.deleteQuestion,a=Ve();return t.questions.length?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(I.a,{className:a.textSubtitle,variant:"body1",children:"Preguntas"}),Object(d.jsx)(te.a,{children:t.questions.map((function(e,t){var r=e.question,i=e.duration;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(ne.a,{}),Object(d.jsxs)(le.a,{className:a.questionListItem,children:[Object(d.jsxs)("span",{children:[Object(d.jsx)(I.a,{variant:"subtitle1",children:r}),"\xa0",Object(d.jsx)(I.a,{variant:"caption",children:"".concat(i," Min.")})]}),Object(d.jsx)(ae.a,{onClick:function(){n(t)},children:Object(d.jsx)(Ke.a,{color:"error"})})]},r+t),Object(d.jsx)(ne.a,{})]})}))})]}):Object(d.jsx)(z.a,{className:a.textSubtitle,variant:"outlined",severity:"info",children:"Todavia no hay preguntas en esta reunion"})},Ze=n(24),$e={duration:"2",question:"",isEnded:!1},et={beginDate:+new Date,endDate:null,title:"",isEnded:!1,questions:[]},tt=n(298),nt=[{field:"firstName",width:150,headerName:"Nombre"},{field:"lastName",width:150,headerName:"Apellido"},{field:"email",width:150,headerName:"Email"}],at=function(e){var t=e.onCheckboxClick,n=void 0===t?function(e,t){}:t,r=Y().getUsers,i=Object(a.useState)([]),c=Object(S.a)(i,2),o=c[0],s=c[1];return Object(a.useEffect)((function(){r().then((function(e){s(e)}))}),[r]),Object(d.jsx)(E.a,{container:!0,style:{height:"300px",width:"100%"},children:Object(d.jsx)(tt.a,{rows:o,columns:nt,pageSize:5,checkboxSelection:!0,disableSelectionOnClick:!0,onSelectionModelChange:function(e){!function(e){var t=o.reduce((function(t,n){return e.includes(n.id)&&(t[n.id]={name:"".concat(n.firstName," ").concat(n.lastName),job:n.job,period:n.period}),t}),{});n(t)}(e)}})})},rt=function(e){var t=e.handleClose,n=e.show,r=Ve(),i=function(){var e=Ee().createRoom,t=Object(a.useState)(""),n=Object(S.a)(t,2),r=n[0],i=n[1],c=Object(a.useState)([]),o=Object(S.a)(c,2),s=o[0],l=o[1],u=Object(a.useState)(et),d=Object(S.a)(u,2),j=d[0],b=d[1],h=Object(a.useState)($e),O=Object(S.a)(h,2),p=O[0],x=O[1];return{currentQuestion:p,currentRoom:j,errorMessage:r,pushQuestion:function(){p.question?(i(""),b((function(e){return Object(m.a)(Object(m.a)({},e),{},{questions:[].concat(Object(Ze.a)(e.questions),[p])})})),x($e)):i("Debe escribir el titulo de la pregunta")},deleteQuestion:function(e){var t=j.questions.filter((function(t,n){return n!==e}));b((function(e){return Object(m.a)(Object(m.a)({},e),{},{questions:t})}))},handleCurrentQuestionChange:function(e){var t=e.target,n=t.value,a=t.name;x((function(e){return Object(m.a)(Object(m.a)({},e),{},Object(y.a)({},null!==a&&void 0!==a?a:"question",n))}))},handleCurrentRoomChange:function(e){var t=e.target,n=t.value,a=t.name;b((function(e){return Object(m.a)(Object(m.a)({},e),{},Object(y.a)({},null!==a&&void 0!==a?a:"title",n))}))},handleQuestionSubmission:function(t){if(j.title&&j.endDate){var n,a=new Date(j.endDate);(null!==(n=j.beginDate)&&void 0!==n?n:new Date<a)?(e(j,s),b(et),t()):i("No es posible crear reuniones en el pasado")}else i("Faltan campos")},setParticipants:l}}(),c=i.deleteQuestion,o=i.currentQuestion,s=i.currentRoom,l=i.errorMessage,u=i.handleCurrentQuestionChange,j=i.handleCurrentRoomChange,b=i.pushQuestion,h=i.setParticipants,O=i.handleQuestionSubmission;return Object(d.jsxs)(ze.a,{fullWidth:!0,maxWidth:"sm",open:n,onClose:t,children:[Object(d.jsx)(Ge.a,{children:Object(d.jsx)(I.a,{variant:"h5",children:"Nueva Sesi\xf3n"})}),Object(d.jsxs)(He.a,{children:[l&&Object(d.jsx)(z.a,{variant:"outlined",severity:"error",children:l}),Object(d.jsx)(Ye,{currentQuestion:o,currentRoom:s,handleCurrentQuestionChange:u,handleCurrentRoomChange:j,pushQuestion:b}),Object(d.jsx)(Xe,{currentRoom:s,deleteQuestion:c}),Object(d.jsx)(I.a,{className:r.textSubtitle,variant:"body1",children:"Usuarios de la sala"}),Object(d.jsx)(at,{onCheckboxClick:h})]}),Object(d.jsx)(Je.a,{children:Object(d.jsx)(B.a,{onClick:function(){O(t)},variant:"contained",color:"primary",children:"Comenzar Reuni\xf3n"})})]})},it={active:[],ended:[]},ct=function(){var e=Fe(),t=Ee().getRooms,n=Object(a.useState)(!1),r=Object(S.a)(n,2),i=r[0],c=r[1],o=Object(a.useState)(it),s=Object(S.a)(o,2),l=s[0],u=s[1],j=function(){c(!i)};return Object(a.useEffect)((function(){l===it&&t().then(u)}),[t,l]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(E.a,{container:!0,spacing:4,alignContent:"center",justifyContent:"center",children:[Object(d.jsx)(fe,{buttonText:"Nueva Sala",onClick:j}),l.active.map((function(e){var t,n=e.title,a=e.id,r=e.beginDate,i=e.endDate;return Object(d.jsx)(Ue,{title:n,roomId:null!==a&&void 0!==a?a:"",date:new Date(null!==(t=null!==r&&void 0!==r?r:i)&&void 0!==t?t:"").toLocaleDateString()})}))]}),Object(d.jsx)(ne.a,{className:e.divider}),Object(d.jsx)(I.a,{className:e.endedRoomsTitle,variant:"h6",children:"Reuniones ya finalizadas"}),Object(d.jsx)(E.a,{container:!0,spacing:2,children:l.ended.map((function(e){var t=e.title,n=e.beginDate,a=e.participants;return Object(d.jsx)(Me,{topic:t,date:null!==n&&void 0!==n?n:0,participants:a})}))}),Object(d.jsx)(rt,{handleClose:j,show:i})]})},ot=Object(R.a)((function(e){return{container:{display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center",height:"70vh"},avatarGrid:{flexDirection:"column",alignItems:"center"},avatar:{marginBottom:"20px",backgroundColor:e.palette.primary.light,height:"200px",width:"200px",boxShadow:"2px 4px 5px 2px #0000004c"},icon:{height:"180px",width:"180px"},buttonList:{backgroundColor:e.palette.background.paper,width:"300px"},optionText:{},logOut:{color:e.palette.secondary.main}}})),st=n(573),lt=function(e){var t=e.name,n=void 0===t?"Admin Name":t,a=ot();return Object(d.jsxs)(E.a,{container:!0,className:a.avatarGrid,children:[Object(d.jsx)(k.a,{className:a.avatar,children:Object(d.jsx)(st.a,{className:a.icon})}),Object(d.jsx)(I.a,{variant:"h4",children:n})]})},ut=n(508),dt=n(574),jt=n(575),bt=n(576),ht=n(577),mt=n(578),Ot=function(){var e="dark"===Object(o.d)((function(e){return e.app.theme}),o.b),t=Object(o.c)(),n=ot();return Object(d.jsx)(E.a,{children:Object(d.jsxs)(te.a,{component:"nav",className:n.buttonList,children:[Object(d.jsxs)(le.a,{button:!0,children:[Object(d.jsx)(ue.a,{children:Object(d.jsx)(dt.a,{})}),Object(d.jsx)(de.a,{className:"".concat(n.optionText),children:"Ajustes De la cuenta"})]}),Object(d.jsxs)(le.a,{children:[Object(d.jsx)(ue.a,{children:e?Object(d.jsx)(jt.a,{}):Object(d.jsx)(bt.a,{})}),Object(d.jsx)(de.a,{className:"".concat(n.optionText),children:"Cambiar tema"}),Object(d.jsx)(ut.a,{onChange:function(){var n=e?"light":"dark";t({type:"SET_THEME",payload:n}),localStorage.setItem("theme",n)},checked:e,name:"changeTheme"})]}),Object(d.jsxs)(le.a,{button:!0,children:[Object(d.jsx)(ue.a,{children:Object(d.jsx)(ht.a,{})}),Object(d.jsx)(de.a,{className:"".concat(n.optionText),children:"Contactar desarrolladores"})]}),Object(d.jsxs)(le.a,{button:!0,children:[Object(d.jsx)(ue.a,{className:n.logOut,children:Object(d.jsx)(mt.a,{})}),Object(d.jsx)(de.a,{className:"".concat(n.logOut," ").concat(n.optionText),children:"Cerrar Sesi\xf3n"})]})]})})},pt=function(){var e=ot();return Object(d.jsxs)(re.a,{className:e.container,children:[Object(d.jsx)(lt,{name:"Jorge Tamariz"}),Object(d.jsx)(Ot,{})]})},xt={firstName:"",lastName:"",email:"",job:"",password:"",confirmPassword:"",period:(new Date).getFullYear(),id:""},ft=Object(R.a)((function(e){return{adormentSpan:{whiteSpace:"nowrap",marginLeft:"2vw"}}})),gt=function(e){var t=e.handleChange,n=e.currentUser,a=ft();return Object(d.jsxs)(E.a,{container:!0,spacing:3,style:{paddingTop:"20px"},children:[Object(d.jsx)(E.a,{item:!0,xs:12,sm:6,children:Object(d.jsx)(Q.a,{onChange:t,value:n.firstName,required:!0,id:"firstName",name:"firstName",label:"Nombres",fullWidth:!0,autoComplete:"given-name"})}),Object(d.jsx)(E.a,{item:!0,xs:12,sm:6,children:Object(d.jsx)(Q.a,{onChange:t,value:n.lastName,required:!0,id:"lastName",name:"lastName",label:"Apellidos",fullWidth:!0,autoComplete:"family-name"})}),Object(d.jsx)(E.a,{item:!0,xs:12,sm:12,children:Object(d.jsx)(Q.a,{onChange:t,value:n.email,required:!0,id:"email",name:"email",label:"Correo Electr\xf3nico",fullWidth:!0,autoComplete:"family-name"})}),Object(d.jsx)(E.a,{item:!0,xs:12,sm:6,children:Object(d.jsx)(Q.a,{onChange:t,value:n.password,required:!0,type:"password",id:"password",name:"password",label:"Contrase\xf1a",fullWidth:!0,autoComplete:"family-name"})}),Object(d.jsx)(E.a,{item:!0,xs:12,sm:6,children:Object(d.jsx)(Q.a,{onChange:t,value:n.confirmPassword,required:!0,type:"password",id:"confirmPassword",name:"confirmPassword",label:"Confirmar Contrase\xf1a",fullWidth:!0,autoComplete:"family-name"})}),Object(d.jsx)(E.a,{item:!0,sm:7,xs:12,children:Object(d.jsx)(Q.a,{onChange:t,value:n.job,required:!0,id:"job",name:"job",label:"Circunscripci\xf3n",fullWidth:!0})}),Object(d.jsx)(E.a,{item:!0,sm:5,xs:12,children:Object(d.jsx)(Q.a,{onChange:t,value:n.period,id:"period",defaultValue:(new Date).getFullYear(),type:"number",name:"period",label:"Periodo",fullWidth:!0,InputProps:{endAdornment:Object(d.jsx)("span",{className:a.adormentSpan,children:"Hasta ".concat(JSON.parse(n.period)+4)})}})})]})},vt=n(88),Ct=vt.a().shape({firstName:vt.c().required("el campo primer nobre es requerido"),lastName:vt.c().required("el campo apellido es requerido"),email:vt.c().required("el campo email es requerido"),job:vt.c().required("el campo cargo es requerido"),password:vt.c().required("el campo contrase\xf1a es requerido").min(6,"El campo contrase\xf1a debe tener al menos 6 digitos"),confirmPassword:vt.c().required("el campo confirmar contrase\xf1a es requerido").oneOf([vt.b("password"),null],"Confirmar contrase\xf1a debe ser igual a contrase\xf1a"),period:vt.c().required("el campo periodo es requerido")}),wt=function(e){var t=e.id,n=e.show,r=void 0!==n&&n,i=e.handleClose,c=e.submissionCallback,o=void 0===c?function(){}:c,s=t?"Editar":"Crear",l=Object(a.useState)(xt),u=Object(S.a)(l,2),j=u[0],b=u[1],h=Object(a.useState)([]),O=Object(S.a)(h,2),p=O[0],x=O[1];return Object(d.jsxs)(ze.a,{fullWidth:!0,maxWidth:"sm",open:r,onClose:i,children:[Object(d.jsx)(Ge.a,{children:Object(d.jsx)(I.a,{variant:"h5",children:"".concat(s," Usuario")})}),Object(d.jsxs)(He.a,{children:[(null===p||void 0===p?void 0:p.length)?p.map((function(e){return Object(d.jsx)(z.a,{variant:"outlined",severity:"warning",children:e})})):null,Object(d.jsx)(gt,{currentUser:j,handleChange:function(e){var t=e.target,n=t.value,a=t.name;b((function(e){return Object(m.a)(Object(m.a)({},e),{},Object(y.a)({},a,n))}))}})]}),Object(d.jsx)(Je.a,{children:Object(d.jsx)(B.a,{onClick:function(){Ct.validate(j,{abortEarly:!1}).then(function(){var e=Object(L.a)(H.a.mark((function e(t){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(xt),i(),e.next=4,o(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){var t=e.errors;x(t)}))},variant:"contained",color:"primary",children:s})})]})},yt=function(e){var t=e.name,n=void 0===t?"test":t,r=e.job,i=void 0===r?"Regidor SPM":r,c=e.period,o=void 0===c?"2020-2024":c,s=Object(a.useState)(!1),l=Object(S.a)(s,2),u=l[0],j=l[1],b=Object(a.useRef)(null),h=function(){j(!u)},m=Object(R.a)((function(e){return{avatarIcon:{width:"30px",height:"30px",color:e.palette.grey[100],backgroundColor:e.palette.secondary.main}}}))();return Object(d.jsx)(E.a,{xs:12,sm:3,item:!0,children:Object(d.jsxs)(De.a,{variant:"elevation",children:[Object(d.jsxs)(Pe.a,{open:u,anchorEl:b.current,onClose:h,children:[Object(d.jsx)(Be.a,{children:"Editar"}),Object(d.jsx)(Be.a,{color:"secondary",children:"Eliminar"})]}),Object(d.jsx)(Re.a,{action:Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(ae.a,{ref:b,onClick:h,children:Object(d.jsx)(We.a,{})})}),avatar:Object(d.jsx)(k.a,{className:m.avatarIcon,children:n.toUpperCase()[0]})}),Object(d.jsx)(Te.a,{children:Object(d.jsxs)(W.a,{children:[Object(d.jsx)(I.a,{variant:"h4",children:n}),Object(d.jsx)(I.a,{variant:"caption",children:"".concat(i," | ").concat(o)})]})})]})})},St=function(){var e=Y(),t=e.createUser,n=e.getUsers,r=Object(a.useState)(!1),i=Object(S.a)(r,2),c=i[0],o=i[1],s=Object(a.useState)([]),l=Object(S.a)(s,2),u=l[0],j=l[1],b=function(){o(!c)};return Object(a.useEffect)((function(){u.length||n().then((function(e){j(e)}))}),[n,u.length]),Object(d.jsxs)(re.a,{children:[Object(d.jsx)(fe,{buttonText:"Nuevo Usuario",onClick:b}),Object(d.jsx)(E.a,{container:!0,spacing:2,children:u.map((function(e){return Object(d.jsx)(yt,{name:"".concat(e.firstName," ").concat(e.lastName),job:e.job,period:e.period.toString()})}))}),Object(d.jsx)(wt,{show:c,handleClose:b,submissionCallback:t})]})},kt=function(){return Object(d.jsxs)(x.d,{children:[Object(d.jsx)(x.b,{exact:!0,path:"/ajustes",component:pt}),Object(d.jsx)(x.b,{exact:!0,path:"/usuarios",component:St}),Object(d.jsx)(x.b,{exact:!0,path:"/sala/:id",component:Ie}),Object(d.jsx)(x.b,{path:"/",component:ct})]})};function Nt(){var e=pe(),t=r.a.useState(!0),n=Object(S.a)(t,2),i=n[0],c=n[1];return Object(a.useEffect)((function(){var e;c(JSON.parse(null!==(e=localStorage.getItem("dashBoardOpen"))&&void 0!==e?e:"false"))}),[]),Object(d.jsxs)("div",{className:e.root,children:[Object(d.jsx)(N.a,{}),Object(d.jsx)($.a,{position:"absolute",className:Object(X.a)(e.appBar,i&&e.appBarShift),children:Object(d.jsxs)(ee.a,{className:e.toolbar,children:[Object(d.jsx)(ae.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){localStorage.setItem("dashBoardOpen",JSON.stringify("true")),c(!0)},className:Object(X.a)(e.menuButton,i&&e.menuButtonHidden),children:Object(d.jsx)(ce.a,{})}),Object(d.jsxs)(I.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:e.title,children:[Object(d.jsx)(D.a,{})," Suffragium"]}),Object(d.jsx)(ae.a,{color:"inherit"})]})}),Object(d.jsxs)(Z.a,{variant:"permanent",classes:{paper:Object(X.a)(e.drawerPaper,!i&&e.drawerPaperClose)},open:i,children:[Object(d.jsx)("div",{className:e.toolbarIcon,children:Object(d.jsx)(ae.a,{onClick:function(){localStorage.setItem("dashBoardOpen",JSON.stringify("false")),c(!1)},children:Object(d.jsx)(se.a,{})})}),Object(d.jsx)(ne.a,{}),Object(d.jsx)(te.a,{children:Object(d.jsx)(Oe,{})})]}),Object(d.jsxs)("main",{className:e.content,children:[Object(d.jsx)("div",{className:e.appBarSpacer}),Object(d.jsx)(re.a,{maxWidth:"lg",className:e.container,children:Object(d.jsx)(kt,{})})]})]})}var qt=function(){var e=Y().checkIfToken,t=Object(o.d)((function(e){return e.app.user.uid})),n=function(){var e=Object(o.c)(),t=Object(w.a)("(prefers-color-scheme: dark)"),n=Object(o.d)((function(e){return e.app.theme}),o.b),r=Object(a.useCallback)((function(){var n=localStorage.getItem("theme");if(n)return n;var a=t?"dark":"light";return localStorage.setItem("theme",a),e({type:"SET_THEME",payload:a}),a}),[e,t]),i=Object(a.useMemo)((function(){return Object(C.b)({palette:{type:n}})}),[n]);return Object(a.useEffect)((function(){r()}),[r]),i}(),r=!!t;return Object(a.useEffect)((function(){e()}),[e]),Object(d.jsx)(v.a,{theme:n,children:Object(d.jsxs)(x.d,{children:[Object(d.jsx)(f,{rest:{},isAuthenticated:r,Component:K,exact:!0,path:"/auth"}),Object(d.jsx)(g,{rest:{},isAuthenticated:r,Component:Nt,path:"/"})]})})};var Et=function(){return Object(d.jsx)(b,{children:Object(d.jsx)(o.a,{store:p,children:Object(d.jsx)(s.a,{children:Object(d.jsx)(qt,{})})})})};c.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(Et,{})}),document.getElementById("root"))}},[[499,1,2]]]);
//# sourceMappingURL=main.09ef8091.chunk.js.map